<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Access Log - {{ profile.full_name }}</title>
    <style>
        :root {
            --primary: #2b6ff0;
            --primary-600: #1f5bd1;
            --primary-700: #184aa8;
            --bg: #f6f9ff;
            --white: #ffffff;
            --text: #0f172a;
            --muted: #64748b;
            --line: #e7eefc;
            --shadow: 0 10px 30px rgba(31,91,209,0.12);
        }
        html, body { margin: 0; padding: 0; background: linear-gradient(180deg, #ffffff 0%, var(--bg) 100%); color: var(--text); font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Arial, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif; }
        .page { min-height: 100vh; display: grid; grid-template-rows: auto 1fr auto; }
        .shell { max-width: 980px; margin: 0 auto; padding: 0 16px; }

        .hero { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-600) 60%, var(--primary-700) 100%); min-height: 140px; position: relative; display: flex; align-items: flex-end; padding: 24px 0 18px 0; }
        .hero::after { content: ''; position: absolute; inset: 0; background: radial-gradient(700px 160px at 20% 0%, rgba(255,255,255,0.22), transparent 55%), radial-gradient(700px 160px at 80% -10%, rgba(255,255,255,0.16), transparent 55%); }
        .hero-inner { position: relative; z-index: 1; }
        .hero-title { color: #fff; font-weight: 900; letter-spacing: .2px; margin: 0; font-size: 24px; text-shadow: 0 2px 6px rgba(0,0,0,0.12); }
        .hero-sub { color: rgba(255,255,255,0.92); margin-top: 4px; font-size: 13px; }

        .card { background: var(--white); border: 1px solid var(--line); border-radius: 16px; box-shadow: var(--shadow); overflow: hidden; margin-top: 16px; }
        .card-body { padding: 20px 18px; display: grid; gap: 12px; }

        .header { display: flex; justify-content: space-between; align-items: center; }
        .btn { display: inline-block; text-decoration: none; border-radius: 10px; padding: 10px 14px; font-weight: 700; font-size: 14px; letter-spacing: .2px; }
        .btn-outline { background: #fff; color: var(--primary-700); border: 1px solid var(--primary-600); }

        .log { display: grid; gap: 10px; }
        .entry { background: #fbfdff; border: 1px solid var(--line); border-radius: 12px; padding: 12px 14px; }
        .row { display: grid; grid-template-columns: 1fr 1fr; gap: 8px 16px; }
        .label { color: var(--muted); font-size: 12px; text-transform: uppercase; letter-spacing: .08em; }
        .value { font-weight: 600; }
        .muted { color: var(--muted); font-style: italic; }

        @media (max-width: 680px) {
            .row { grid-template-columns: 1fr; }
            .header { flex-direction: column; gap: 10px; align-items: flex-start; }
        }
    </style>
</head>
<body>
<div class="page">
    <header class="hero">
        <div class="shell hero-inner">
            <h1 class="hero-title">Access Log</h1>
            <div class="hero-sub">{{ profile.full_name }} ({{ profile.national_id }})</div>
        </div>
    </header>

    <main>
        <div class="shell">
            <div class="card">
                <div class="card-body">
                    <div class="header">
                        <div>
                            <div class="label">Showing recent access events</div>
                        </div>
                        <div class="actions">
                            <a href="{% url 'public_profile' profile.national_id %}" class="btn btn-outline">Back to Profile</a>
                        </div>
                    </div>

                    <div class="log">
                        {% if logs %}
                            {% for log in logs %}
                                <div class="entry">
                                    <div class="row">
                                        <div>
                                            <div class="label">Event</div>
                                            <div class="value">{{ log.get_event_type_display }}</div>
                                        </div>
                                        <div>
                                            <div class="label">When</div>
                                            <div class="value">{{ log.created_at|date:"F j, Y H:i" }}</div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div>
                                            <div class="label">Who</div>
                                            <div class="value">{{ log.viewer_email|default:"anonymous" }}</div>
                                        </div>
                                        <div>
                                            <div class="label">Reason</div>
                                            <div class="value">{{ log.reason|default:"—" }}</div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div>
                                            <div class="label">IP Address</div>
                                            <div class="value">{{ log.ip_address|default:"—" }}</div>
                                        </div>
                                        <div>
                                            <div class="label">User-Agent</div>
                                            <div class="value">{{ log.user_agent|default:"—" }}</div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        {% else %}
                            <div class="muted">No access events recorded yet.</div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
</body>
</html>
